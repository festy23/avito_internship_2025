# Linter Configuration

## Используемый линтер

Проект использует **golangci-lint** — агрегатор линтеров для Go, который объединяет множество статических анализаторов в одном инструменте.

## Почему golangci-lint

1. **Единая точка конфигурации** — все линтеры настраиваются в одном файле `.golangci.yml`
2. Паараллельное выполнение линтеров
3. Включает множество проверок из разных инструментов
4. Стандарт промышленной разработки на Go

## Что проверяет

### Качество кода

- **errcheck** — проверяет, что все ошибки обработаны
- **staticcheck** — статический анализ кода, находит баги и проблемы
- **govet** — встроенный анализатор Go, проверяет подозрительные конструкции
- **gosec** — проверка безопасности кода
- **ineffassign** — находит неиспользуемые присваивания
- **unused** — находит неиспользуемые константы, переменные, функции

### Стиль кода

- **revive** — проверка стиля кода (замена golint)
- **gofmt** — проверка форматирования кода
- **goimports** — проверка и форматирование импортов

### Сложность кода

- **gocyclo** — проверка цикломатической сложности (максимум 15)
- **gocognit** — проверка когнитивной сложности (максимум 15)
- **funlen** — проверка длины функций (максимум 100 строк, 50 statements)

### Лучшие практики

- **bodyclose** — проверяет закрытие HTTP response body
- **noctx** — проверяет использование context.Context в HTTP запросах
- **sqlclosecheck** — проверяет закрытие sql.Rows и sql.Stmt
- **errname** — проверяет именование ошибок (Err prefix для sentinel errors)
- **errorlint** — проверяет правильное использование error wrapping

### Документация

- **godot** — проверяет наличие точек в конце комментариев

## Форматирование

- **goimports** — автоматическое форматирование импортов
- **golines** — проверка длины строк (максимум 120 символов)

## Исключения

Для тестовых файлов (`*_test.go`) отключены некоторые проверки:

- `errcheck` — не требуется проверка всех ошибок в тестах
- `funlen` — допускаются длинные тестовые функции
- `gosec` — некоторые проверки безопасности не критичны для тестов
- `noctx` — не требуется context в тестах

## Использование

### Установка

```bash
go install github.com/golangci/golangci-lint/cmd/golangci-lint@latest
```

### Запуск

```bash
# Проверка всего проекта
golangci-lint run

# Проверка конкретной директории
golangci-lint run ./internal/...

# Автоисправление (где возможно)
golangci-lint run --fix
```

### Интеграция в CI/CD

Линтер автоматически запускается в CI/CD пайплайне и блокирует мерж при наличии ошибок.

## Конфигурация

Конфигурация находится в файле `.golangci.yml` в корне проекта.

Основные настройки:

- Максимум одинаковых ошибок: 10
- Максимальная длина строки: 120 символов
- Максимальная цикломатическая сложность: 15
- Максимальная длина функции: 100 строк
